# Dynamic Yield

{% hint style="info" %}
This destination is currently under final review and will be available soon.
{% endhint %}

[Dynamic Yield](https://www.dynamicyield.com) helps businesses deliver digital customer experiences that are personalized, optimized, and synchronized. This integration allows [server-side tracking](https://support.dynamicyield.com/hc/en-us/articles/4414379007633-Reporting-Events#reporting-events-via-server-side-api-0-0).

## Key features

The Dynamic Yield destination provides the following key features:

* **Events structure**: our [Events reference](https://community.commandersact.com/platform-x/developers/tracking/events-reference) covers [Dynamic Yield events](https://support.dynamicyield.com/hc/en-us/articles/4414379007633-Reporting-Events#types-of-events-0-1), meaning that your data is properly bridged to the expected fields in an optimized way.
* **Prebuilt mappings**: data mapping for event-based destinations happens automatically, which simplifies user inputs.
* **Refined data**: you can freely push additional information based on your specific needs (E.g. adding custom events and custom event properties).
* **Smart mapping**: data mapping can be readjusted using your datalayer defined fields.
* **Send all properties**: send all your event properties to Dynamic Yield with a single click.

## Destination setup

{% hint style="info" %}
Use [**Destination filters**](https://doc.commandersact.com/features/destinations/destination-filters) to refine events and/or other properties matching your specific needs.
{% endhint %}

### Configuration

| Settings                  | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| ------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `API Key`                 | <p><em><strong><code>Required</code></strong></em></p><p>Your API key as generated in Dynamic Yield interface. More details are available by following this <a href="https://support.dynamicyield.com/hc/en-us/articles/360022734893#create-an-api-key-0-1">LINK</a>. </p>                                                                                                                                                                                                                                                                                                 |
| `User Identifier`         | User identifier generated by Dynamic Yield and managed, with their client-side tags, via cookies. More details are available by following this [LINK](https://support.dynamicyield.com/hc/en-us/articles/4415087403281#making-api-requests-0-1) (See cookies `_dyid` and `_dyid_server`). When keeping "Default", the above two cookies are used to retrieve a value. Selecting "\[Custom Property]", you can specify a property holding the related value. Regardless of the chosen option, If no value is available our standard property `user.tcId` is used.           |
| `Custom Property`         | When selecting "\[Custom Property]" with the above `User Identifier`, you can Input your custom property name holding the user identifier (E.g. `user.mycustomid`).                                                                                                                                                                                                                                                                                                                                                                                                        |
| `Session Identifier`      | Session identifier generated by Dynamic Yield and managed, with their client-side tag(s), via cookie. More details are available by following this [LINK](https://support.dynamicyield.com/hc/en-us/articles/4415087403281#making-api-requests-0-1) (See cookie `_dyjsession`). When keeping "Default", the above cookie is used to retrieve a value. Selecting "\[Custom Property]", you can specify a property holding the related value. Regardless of the chosen option, If no value is available our standard property `context.device.lifecycle.session_id` is used. |
| `Custom Property`         | When selecting "\[Custom Property]" with the above `Session Identifier`, you can input your custom property name holding the session identifier (E.g. `user.mycustomsid`).                                                                                                                                                                                                                                                                                                                                                                                                 |
| `Send All Properties`     | When activating this option all properties included in the root of your Commanders Act events are also sent to Dynamic Yield in the `properties` object. Properties with child/sub properties are converted into a single one using the underscore character "\_" as separator (E.g. device\_lifecycle\_last\_session\_start).                                                                                                                                                                                                                                             |
| `Custom Event Properties` | Map your custom event properties by setting their field names in `Dynamic Yield property name` and adding the field name holding the value in `Your event property`. E.g. if you input `size` in the `Dynamic Yield property name` and `properties.items.0.product.size` **\[1]** in `Your event property`, you will have a custom event property in Dynamic Yield called `size` with a value based on the content of the field `properties.items.0.product.size`.                                                                                                         |

{% hint style="info" %}
**\[1]** Using "dots" (".") you can navigate deeper to the specific field you want to get the value of. See [Events reference](https://community.commandersact.com/platform-x/developers/tracking/events-reference) for more details on the standard field names by event. You can also freely set custom fields: there are no boundaries.
{% endhint %}

## Quick reference

| Commanders Act Events                                                                                  | Dynamic Yield Types (dyType) |
| ------------------------------------------------------------------------------------------------------ | ---------------------------- |
| `add_to_cart`                                                                                          | `add-to-cart-v1`             |
| `add_to_wishlist`                                                                                      | `add-to-wishlist-v1`         |
| `generate_lead`                                                                                        | `newsletter-subscription-v1` |
| `login`                                                                                                | `login-v1`                   |
| `purchase`                                                                                             | `purchase-v1`                |
| `remove_from_cart`                                                                                     | `remove-from-cart-v1`        |
| `search`                                                                                               | `keyword-search-v1`          |
| `sign_up`                                                                                              | `signup-v1`                  |
| <p><code>video_start</code></p><p><code>video_complete</code></p><p><code>video_ad_complete</code></p> | `video-watch-v1`             |
| `[All other events]` **\[1]**                                                                          | `[Not set]` **\[2]**         |

{% hint style="info" %}
**\[1]** Custom events are also supported.\
**\[2]** Dynamic Yield custom events don't have a type. More details are available following this [LINK](https://support.dynamicyield.com/hc/en-us/articles/4414379007633-Reporting-Events#custom-events-0-3).
{% endhint %}

## Field Mappings

{% hint style="info" %}
Most properties can be remapped using our "Smart Mapping" feature.
{% endhint %}

| Commanders Act Properties | Dynamic Yield Properties                                          |
| ------------------------- | ----------------------------------------------------------------- |
| `User Identifier`         | <p><code>user.dyid</code></p><p><code>user.dyid_server</code></p> |
| `Session Identifier`      | `session.dy`                                                      |
| `context.device.ip`       | `context.device.ip`                                               |
| `event_name`              | `events[0].name`                                                  |
| `(event_name)`            | `events[0].properties.dyType` **\[1]**                            |
| `value`                   | `events[0].properties.value`                                      |
| `currency`                | `events[0].properties.currency`                                   |
| `items.0.id`              | `events[0].properties.productId` **\[2]**                         |
| `items.0.quantity`        | `events[0].properties.quantity` **\[2]**                          |
| `items.X.id`              | `events[0].properties.cart.X.productId`                           |
| `items.X.quantity`        | `events[0].properties.cart.X.quantity`                            |
| `items.X.product.price`   | `events[0].properties.cart.X.itemPrice`                           |
| `id`                      | `events[0].properties.uniqueTransactionId`                        |
| `user.email`              | `events[0].properties.hashedEmail`                                |
| `(event_name)`            | `events[0].properties.progress` **\[3]**                          |
| `search_term`             | `events[0].properties.keywords`                                   |
| `Your event property`     | `Dynamic Yield property name` **\[4]**                            |

{% hint style="info" %}
**\[1]** See [Quick reference](dynamic-yield.md#quick-reference) for more details.\
**\[2]** Included for [add\_to\_cart](https://doc.commandersact.com/developers/tracking/events-reference#add\_to\_cart), [remove\_from\_cart](https://doc.commandersact.com/developers/tracking/events-reference#remove\_from\_cart) and [add\_to\_wishlist](https://doc.commandersact.com/developers/tracking/events-reference#add\_to\_wishlist) events.\
**\[3]** Set with<mark style="color:blue;">`VIDEO_STARTED`</mark>,<mark style="color:blue;">`VIDEO_FINISHED`</mark>or <mark style="color:blue;">PREROLL\_FINISHED</mark> depending if the event name is [video\_start](https://doc.commandersact.com/developers/tracking/events-reference/video-event-reference#video-playback-started), [video\_complete](https://doc.commandersact.com/developers/tracking/events-reference/video-event-reference#video-playback-completed) or [video\_ad\_complete](https://doc.commandersact.com/developers/tracking/events-reference/video-event-reference#video-a-d-completed) respectively.\
**\[4]** See<mark style="color:blue;">`Custom Event Properties`</mark>in [Configuration ](dynamic-yield.md#configuration)for more details on how you can send custom properties to Dynamic Yield.
{% endhint %}

