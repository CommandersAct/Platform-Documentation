# Dynamic Yield

{% hint style="info" %}
This destination is currently under final review and will be available soon.
{% endhint %}

[Dynamic Yield](https://www.dynamicyield.com) helps businesses deliver digital customer experiences that are personalized, optimized, and synchronized. This integration allows [server-side tracking](https://support.dynamicyield.com/hc/en-us/articles/4414379007633-Reporting-Events#reporting-events-via-server-side-api-0-0).

## Key features

The Dynamic Yield destination provides the following key features:

* **Events structure**: our [Events reference](https://community.commandersact.com/platform-x/developers/tracking/events-reference) covers [Dynamic Yield events](https://support.dynamicyield.com/hc/en-us/articles/4414379007633-Reporting-Events#types-of-events-0-1), meaning that your data is properly bridged to the expected fields in an optimized way.
* **Prebuilt mappings**: data mapping for event-based destinations happens automatically, which simplifies user inputs.
* **Refined data**: you can freely push additional information based on your specific needs (E.g. adding custom events and custom event properties).
* **Smart mapping**: data mapping can be readjusted using your datalayer defined fields.
* **Send all properties**: send all your event properties to Dynamic Yield with a single click.

## Destination setup

{% hint style="info" %}
Use [**Destination filters**](https://doc.commandersact.com/features/destinations/destination-filters) to refine events and/or other properties matching your specific needs.
{% endhint %}

### Configuration

<table><thead><tr><th width="300">Settings</th><th>Description</th></tr></thead><tbody><tr><td><code>API Key</code></td><td><em><strong><code>Required</code></strong></em> <br>Your API key as generated in Dynamic Yield interface. More details are available by following this <a href="https://support.dynamicyield.com/hc/en-us/articles/360022734893#create-an-api-key-0-1">LINK</a>. </td></tr><tr><td><code>User Identifier</code></td><td>User identifier generated by Dynamic Yield and managed, with their client-side tags, via cookies. More details are available by following this <a href="https://support.dynamicyield.com/hc/en-us/articles/4415087403281#making-api-requests-0-1">LINK</a> (See cookies <code>_dyid</code> and <code>_dyid_server</code>). When keeping "Default", the above two cookies are used to retrieve a value. Selecting "[Custom Property]", you can specify a property holding the related value. Regardless of the chosen option, If no value is available our standard property <code>user.tcId</code> is used.</td></tr><tr><td><code>Custom Property</code></td><td>When selecting "[Custom Property]" with the above <code>User Identifier</code>, you can Input your custom property name holding the user identifier (E.g. <code>user.mycustomid</code>).</td></tr><tr><td><code>Session Identifier</code></td><td>Session identifier generated by Dynamic Yield and managed, with their client-side tag(s), via cookie. More details are available by following this <a href="https://support.dynamicyield.com/hc/en-us/articles/4415087403281#making-api-requests-0-1">LINK</a> (See cookie <code>_dyjsession</code>). When keeping "Default", the above cookie is used to retrieve a value. Selecting "[Custom Property]", you can specify a property holding the related value. Regardless of the chosen option, If no value is available our standard property <code>context.device.lifecycle.session_id</code> is used.</td></tr><tr><td><code>Custom Property</code></td><td>When selecting "[Custom Property]" with the above <code>Session Identifier</code>, you can input your custom property name holding the session identifier (E.g. <code>user.mycustomsid</code>).</td></tr><tr><td><code>Send All Properties</code></td><td>When activating this option all properties included in the root of your Commanders Act events are also sent to Dynamic Yield in the <code>properties</code> object. Properties with child/sub properties are converted into a single one using the underscore character "_" as separator (E.g. device_lifecycle_last_session_start).</td></tr><tr><td><code>Custom Event Properties</code></td><td>Map your custom event properties by setting their field names in <code>Dynamic Yield property name</code> and adding the field name holding the value in <code>Your event property</code>. E.g. if you input <code>size</code> in the <code>Dynamic Yield property name</code> and <code>items.0.product.size</code> <strong>[1]</strong> in <code>Your event property</code>, you will have a custom event property in Dynamic Yield called <code>size</code> with a value based on the content of the field <code>items.0.product.size</code>.</td></tr></tbody></table>

{% hint style="info" %}
**\[1]** Using "dots" (".") you can navigate deeper to the specific field you want to get the value of. See [Events reference](https://community.commandersact.com/platform-x/developers/tracking/events-reference) for more details on the standard field names by event. You can also freely set custom fields: there are no boundaries.
{% endhint %}

## Quick reference

| Commanders Act Events                                                                                  | Dynamic Yield Types (dyType) |
| ------------------------------------------------------------------------------------------------------ | ---------------------------- |
| `add_to_cart`                                                                                          | `add-to-cart-v1`             |
| `add_to_wishlist`                                                                                      | `add-to-wishlist-v1`         |
| `generate_lead`                                                                                        | `newsletter-subscription-v1` |
| `login`                                                                                                | `login-v1`                   |
| `purchase`                                                                                             | `purchase-v1`                |
| `remove_from_cart`                                                                                     | `remove-from-cart-v1`        |
| `search`                                                                                               | `keyword-search-v1`          |
| `sign_up`                                                                                              | `signup-v1`                  |
| <p><code>video_start</code></p><p><code>video_complete</code></p><p><code>video_ad_complete</code></p> | `video-watch-v1`             |
| `[Any Other Event]` **\[1]**                                                                           | `[Not Set]` **\[2]**         |

{% hint style="info" %}
**\[1]** Custom events are also supported.\
**\[2]** Dynamic Yield custom events don't have a type. More details are available following this [LINK](https://support.dynamicyield.com/hc/en-us/articles/4414379007633-Reporting-Events#custom-events-0-3).
{% endhint %}

## Field Mappings

{% hint style="info" %}
Most properties can be remapped using our "Smart Mapping" feature.
{% endhint %}

<table><thead><tr><th width="312.6685580062746">Commanders Act Properties</th><th>Dynamic Yield Properties</th></tr></thead><tbody><tr><td><code>User Identifier</code></td><td><p><code>user.dyid</code></p><p><code>user.dyid_server</code></p></td></tr><tr><td><code>Session Identifier</code></td><td><code>session.dy</code></td></tr><tr><td><code>context.device.ip</code></td><td><code>context.device.ip</code></td></tr><tr><td><code>event_name</code></td><td><code>events[0].name</code></td></tr><tr><td><code>(event_name)</code></td><td><code>events[0].properties.dyType</code> <strong>[1]</strong></td></tr><tr><td><code>value</code></td><td><code>events[0].properties.value</code></td></tr><tr><td><code>currency</code></td><td><code>events[0].properties.currency</code></td></tr><tr><td><code>items.0.id</code></td><td><code>events[0].properties.productId</code> <strong>[2]</strong></td></tr><tr><td><code>items.0.quantity</code></td><td><code>events[0].properties.quantity</code> <strong>[2]</strong></td></tr><tr><td><code>items.X.id</code></td><td><code>events[0].properties.cart.X.productId</code></td></tr><tr><td><code>items.X.quantity</code></td><td><code>events[0].properties.cart.X.quantity</code></td></tr><tr><td><code>items.X.product.price</code></td><td><code>events[0].properties.cart.X.itemPrice</code></td></tr><tr><td><code>id</code></td><td><code>events[0].properties.uniqueTransactionId</code></td></tr><tr><td><code>user.email</code></td><td><code>events[0].properties.hashedEmail</code></td></tr><tr><td><code>(event_name)</code></td><td><code>events[0].properties.progress</code> <strong>[3]</strong></td></tr><tr><td><code>search_term</code></td><td><code>events[0].properties.keywords</code></td></tr><tr><td><code>Your event property</code></td><td><code>Dynamic Yield property name</code> <strong>[4]</strong></td></tr></tbody></table>

{% hint style="info" %}
**\[1]** See [Quick reference](dynamic-yield.md#quick-reference) for more details.\
**\[2]** Included for [add\_to\_cart](https://doc.commandersact.com/developers/tracking/events-reference#add\_to\_cart), [remove\_from\_cart](https://doc.commandersact.com/developers/tracking/events-reference#remove\_from\_cart) and [add\_to\_wishlist](https://doc.commandersact.com/developers/tracking/events-reference#add\_to\_wishlist) events.\
**\[3]** Set with <mark style="color:blue;">`VIDEO_STARTED`</mark> , <mark style="color:blue;">`VIDEO_FINISHED`</mark> or  <mark style="color:blue;">PREROLL\_FINISHED</mark> depending if the event name is [video\_start](https://doc.commandersact.com/developers/tracking/events-reference/video-event-reference#video-playback-started), [video\_complete](https://doc.commandersact.com/developers/tracking/events-reference/video-event-reference#video-playback-completed) or [video\_ad\_complete](https://doc.commandersact.com/developers/tracking/events-reference/video-event-reference#video-a-d-completed) respectively.\
**\[4]** See <mark style="color:blue;">`Custom Event Properties`</mark> in [Configuration ](dynamic-yield.md#configuration)for more details on how you can send custom properties to Dynamic Yield.
{% endhint %}

